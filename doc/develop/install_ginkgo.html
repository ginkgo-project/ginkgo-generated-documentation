<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ginkgo: Installation Instructions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_doc.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Ginkgo
   &#160;<span id="projectnumber">Generated from pipelines/1246106114 branch based on develop. Ginkgo version 1.8.0</span>
   </div>
   <div id="projectbrief">A numerical linear algebra library targeting many-core architectures</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Installation Instructions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md0"></a>
Building</h2>
<p>Use the standard CMake build procedure:</p>
<div class="fragment"><div class="line">mkdir build; cd build</div>
<div class="line">cmake [OPTIONS] .. &amp;&amp; cmake --build .</div>
</div><!-- fragment --><p>For Microsoft Visual Studio, use <code>cmake --build . --config &lt;build_type&gt;</code> to decide the build type. The possible options are <code>Debug</code>, <code>Release</code>, <code>RelWithDebInfo</code> and <code>MinSizeRel</code>.</p>
<p>Replace <code>[OPTIONS]</code> with desired cmake options for your build. Ginkgo adds the following additional switches to control what is being built:</p>
<ul>
<li><code>-DGINKGO_DEVEL_TOOLS={ON, OFF}</code> sets up the build system for development (requires pre-commit, will also download the clang-format pre-commit hook), default is <code>OFF</code>. The default behavior installs a pre-commit hook, which disables git commits. If it is set to <code>ON</code>, a new pre-commit hook for formatting will be installed (enabling commits again). In both cases the hook may overwrite a user defined pre-commit hook when Ginkgo is used as a submodule.</li>
<li><code>-DGINKGO_MIXED_PRECISION={ON, OFF}</code> compiles true mixed-precision kernels instead of converting data on the fly, default is <code>OFF</code>. Enabling this flag increases the library size, but improves performance of mixed-precision kernels.</li>
<li><code>-DGINKGO_BUILD_TESTS={ON, OFF}</code> builds Ginkgo's tests (will download googletest), default is <code>ON</code>.</li>
<li><code>-DGINKGO_FAST_TESTS={ON, OFF}</code> reduces the input sizes for a few slow tests to speed them up, default is <code>OFF</code>.</li>
<li><code>-DGINKGO_BUILD_BENCHMARKS={ON, OFF}</code> builds Ginkgo's benchmarks (will download gflags and nlohmann-json), default is <code>ON</code>.</li>
<li><code>-DGINKGO_BUILD_EXAMPLES={ON, OFF}</code> builds Ginkgo's examples, default is <code>ON</code></li>
<li><code>-DGINKGO_BUILD_EXTLIB_EXAMPLE={ON, OFF}</code> builds the interfacing example with deal.II, default is <code>OFF</code>.</li>
<li><code>-DGINKGO_BUILD_REFERENCE={ON, OFF}</code> build reference implementations of the kernels, useful for testing, default is <code>ON</code></li>
<li><code>-DGINKGO_BUILD_OMP={ON, OFF}</code> builds optimized OpenMP versions of the kernels, default is <code>ON</code> if the selected C++ compiler supports OpenMP, <code>OFF</code> otherwise.</li>
<li><code>-DGINKGO_BUILD_CUDA={ON, OFF}</code> builds optimized cuda versions of the kernels (requires CUDA), default is <code>ON</code> if a CUDA compiler could be detected, <code>OFF</code> otherwise.</li>
<li><code>-DGINKGO_BUILD_DPCPP={ON, OFF}</code> is deprecated. Please use <code>GINKGO_BUILD_SYCL</code> instead.</li>
<li><code>-DGINKGO_BUILD_SYCL={ON, OFF}</code> builds optimized SYCL versions of the kernels (requires <code>CMAKE_CXX_COMPILER</code> to be set to the <code>dpcpp</code> or <code>icpx</code> compiler). The default is <code>ON</code> if <code>CMAKE_CXX_COMPILER</code> is a SYCL compiler, <code>OFF</code> otherwise. Due to some differences in IEEE 754 floating point numberhandling in the Intel SYCL compilers, Ginkgo tests may fail unless compiled with <code>-DCMAKE_CXX_FLAGS=-ffp-model=precise</code></li>
<li><code>-DGINKGO_BUILD_HIP={ON, OFF}</code> builds optimized HIP versions of the kernels (requires HIP), default is <code>ON</code> if an installation of HIP could be detected, <code>OFF</code> otherwise.</li>
<li><code>-DGINKGO_HIP_AMDGPU="gpuarch1;gpuarch2"</code> the amdgpu_target(s) variable passed to hipcc for the <code>hcc</code> HIP backend. The default is none (auto).</li>
<li><code>-DGINKGO_BUILD_HWLOC={ON, OFF}</code> builds Ginkgo with HWLOC. Default is <code>OFF</code>.</li>
<li><code>-DGINKGO_BUILD_DOC={ON, OFF}</code> creates an HTML version of Ginkgo's documentation from inline comments in the code. The default is <code>OFF</code>.</li>
<li><code>-DGINKGO_DOC_GENERATE_EXAMPLES={ON, OFF}</code> generates the documentation of examples in Ginkgo. The default is <code>ON</code>.</li>
<li><code>-DGINKGO_DOC_GENERATE_PDF={ON, OFF}</code> generates a PDF version of Ginkgo's documentation from inline comments in the code. The default is <code>OFF</code>.</li>
<li><code>-DGINKGO_DOC_GENERATE_DEV={ON, OFF}</code> generates the developer version of Ginkgo's documentation. The default is <code>OFF</code>.</li>
<li><code>-DGINKGO_WITH_CLANG_TIDY={ON, OFF}</code> makes Ginkgo call <code>clang-tidy</code> to find programming issues. The path can be manually controlled with the CMake variable <code>-DGINKGO_CLANG_TIDY_PATH=&lt;path&gt;</code>. The default is <code>OFF</code>.</li>
<li><code>-DGINKGO_WITH_IWYU={ON, OFF}</code> makes Ginkgo call <code>iwyu</code> to find include issues. The path can be manually controlled with the CMake variable <code>-DGINKGO_IWYU_PATH=&lt;path&gt;</code>. The default is <code>OFF</code>.</li>
<li><code>-DGINKGO_CHECK_CIRCULAR_DEPS={ON, OFF}</code> enables compile-time checks for circular dependencies between different Ginkgo libraries and self-sufficient headers. Should only be used for development purposes. The default is <code>OFF</code>.</li>
<li><code>-DGINKGO_VERBOSE_LEVEL=integer</code> sets the verbosity of Ginkgo.<ul>
<li><code>0</code> disables all output in the main libraries,</li>
<li><code>1</code> enables a few important messages related to unexpected behavior (default).</li>
</ul>
</li>
<li><code>GINKGO_INSTALL_RPATH</code> allows setting any RPATH information when installing the Ginkgo libraries. If this is <code>OFF</code>, the behavior is the same as if all other RPATH flags are set to <code>OFF</code> as well. The default is <code>ON</code>.</li>
<li><code>GINKGO_INSTALL_RPATH_ORIGIN</code> adds $ORIGIN (Linux) or @loader_path (MacOS) to the installation RPATH. The default is <code>ON</code>.</li>
<li><code>GINKGO_INSTALL_RPATH_DEPENDENCIES</code> adds the dependencies to the installation RPATH. The default is <code>OFF</code>.</li>
<li><code>-DCMAKE_INSTALL_PREFIX=path</code> sets the installation path for <code>make install</code>. The default value is usually something like <code>/usr/local</code>.</li>
<li><code>-DCMAKE_BUILD_TYPE=type</code> specifies which configuration will be used for this build of Ginkgo. The default is <code>RELEASE</code>. Supported values are CMake's standard build types such as <code>DEBUG</code> and <code>RELEASE</code> and the Ginkgo specific <code>COVERAGE</code>, <code>ASAN</code> (AddressSanitizer), <code>LSAN</code> (LeakSanitizer), <code>TSAN</code> (ThreadSanitizer) and <code>UBSAN</code> (undefined behavior sanitizer) types.</li>
<li><code>-DBUILD_SHARED_LIBS={ON, OFF}</code> builds ginkgo as shared libraries (<code>OFF</code>) or as dynamic libraries (<code>ON</code>), default is <code>ON</code>.</li>
<li><code>-DGINKGO_JACOBI_FULL_OPTIMIZATIONS={ON, OFF}</code> use all the optimizations for the CUDA Jacobi algorithm. <code>OFF</code> by default. Setting this option to <code>ON</code> may lead to very slow compile time (&gt;20 minutes) for the <code>jacobi_generate_kernels.cu</code> file and high memory usage.</li>
<li><code>-DCMAKE_CUDA_HOST_COMPILER=path</code> instructs the build system to explicitly set CUDA's host compiler to the path given as argument. By default, CUDA uses its toolchain's host compiler. Setting this option may help if you're experiencing linking errors due to ABI incompatibilities. This option is supported since <a href="https://github.com/Kitware/CMake/commit/489c52ce680df6439f9c1e553cd2925ca8944cb1">CMake 3.8</a> but <a href="https://cmake.org/cmake/help/v3.10/variable/CMAKE_CUDA_HOST_COMPILER.html">documented starting from 3.10</a>.</li>
<li><p class="startli"><code>-DGINKGO_CUDA_ARCHITECTURES=&lt;list&gt;</code> where <code>&lt;list&gt;</code> is a semicolon (<code>;</code>) separated list of architectures. Supported values are:</p><ul>
<li><code>Auto</code></li>
<li><code>Kepler</code>, <code>Maxwell</code>, <code>Pascal</code>, <code>Volta</code>, <code>Turing</code>, <code>Ampere</code></li>
<li><code>CODE</code>, <code>CODE(COMPUTE)</code>, <code>(COMPUTE)</code></li>
</ul>
<p class="startli"><code>Auto</code> will automatically detect the present CUDA-enabled GPU architectures in the system. <code>Kepler</code>, <code>Maxwell</code>, <code>Pascal</code>, <code>Volta</code> and <code>Ampere</code> will add flags for all architectures of that particular NVIDIA GPU generation. <code>COMPUTE</code> and <code>CODE</code> are placeholders that should be replaced with compute and code numbers (e.g. for <code>compute_70</code> and <code>sm_70</code> <code>COMPUTE</code> and <code>CODE</code> should be replaced with <code>70</code>. Default is <code>Auto</code>. For a more detailed explanation of this option see the <a href="https://github.com/ginkgo-project/CudaArchitectureSelector/blob/master/CudaArchitectureSelector.cmake#L58"><code>ARCHITECTURES</code> specification list</a> section in the documentation of the CudaArchitectureSelector CMake module.</p>
</li>
</ul>
<p>Additionally, the following CMake options have effect on the build process:</p>
<ul>
<li><code>-DCMAKE_EXPORT_PACKAGE_REGISTRY={ON,OFF}</code> if set to <code>ON</code> the build directory will be stored in the current user's CMake package registry.</li>
</ul>
<p>For example, to build everything (in debug mode), use:</p>
<div class="fragment"><div class="line">cmake .. -BDebug -DCMAKE_BUILD_TYPE=Debug -DGINKGO_DEVEL_TOOLS=ON \</div>
<div class="line">    -DGINKGO_BUILD_TESTS=ON -DGINKGO_BUILD_REFERENCE=ON -DGINKGO_BUILD_OMP=ON \</div>
<div class="line">    -DGINKGO_BUILD_CUDA=ON -DGINKGO_BUILD_HIP=ON</div>
<div class="line">cmake --build Debug</div>
</div><!-- fragment --><p>NOTE: Ginkgo is known to work with the <code>Unix Makefiles</code>, <code>Ninja</code>, <code>MinGW Makefiles</code> and <code>Visual Studio 16 2019</code> based generators. Other CMake generators are untested.</p>
<h2><a class="anchor" id="autotoc_md1"></a>
Building Ginkgo in Windows</h2>
<p>Depending on the configuration settings, some manual work might be required:</p><ul>
<li>Build Ginkgo with Debug mode: Some Debug build specific issues can appear depending on the machine and environment: When you encounter the error message <code>ld: error: export ordinal too large</code>, add the compilation flag <code>-O1</code> by adding <code>-DCMAKE_CXX_FLAGS=-O1</code> to the CMake invocation.</li>
<li>Build Ginkgo in <em>MinGW</em>:\ If encountering the issue <code>cc1plus.exe: out of memory allocating 65536 bytes</code>, please follow the workaround in <a href="https://www.intel.com/content/www/us/en/programmable/support/support-resources/knowledge-base/embedded/2016/cc1plus-exe--out-of-memory-allocating-65536-bytes.html">reference</a>, or trying to compile ginkgo again might work.</li>
</ul>
<h2><a class="anchor" id="autotoc_md2"></a>
Building Ginkgo with HIP support</h2>
<p>Ginkgo provides a <a href="https://github.com/ROCm-Developer-Tools/HIP">HIP</a> backend. This allows to compile optimized versions of the kernels for either AMD or NVIDIA GPUs. The CMake configuration step will try to auto-detect the presence of HIP either at <code>/opt/rocm/hip</code> or at the path specified by <code>HIP_PATH</code> as a CMake parameter (<code>-DHIP_PATH=</code>) or environment variable (<code>export HIP_PATH=</code>), unless <code>-DGINKGO_BUILD_HIP=ON/OFF</code> is set explicitly.</p>
<h3><a class="anchor" id="autotoc_md3"></a>
Changing the paths to search for HIP and other packages</h3>
<p>All HIP installation paths can be configured through the use of environment variables or CMake variables. This way of configuring the paths is currently imposed by the <code>HIP</code> tool suite. The variables are the following:</p><ul>
<li>CMake <code>-DROCM_PATH=</code> or environment <code>export ROCM_PATH=</code>: sets the <code>ROCM</code> installation path. The default value is <code>/opt/rocm/</code>.</li>
<li>CMake <code>-DHIP_CLANG_PATH</code> or environment <code>export HIP_CLANG_PATH=</code>: sets the <code>HIP</code> compatible <code>clang</code> binary path. The default value is <code>${ROCM_PATH}/llvm/bin</code>.</li>
<li>CMake <code>-DHIP_PATH=</code> or environment <code>export HIP_PATH=</code>: sets the <code>HIP</code> installation path. The default value is <code>${ROCM_PATH}/hip</code>.</li>
<li>CMake <code>-DHIPBLAS_PATH=</code> or environment <code>export HIPBLAS_PATH=</code>: sets the <code>hipBLAS</code> installation path. The default value is <code>${ROCM_PATH}/hipblas</code>.</li>
<li>CMake <code>-DHIPSPARSE_PATH=</code> or environment <code>export HIPSPARSE_PATH=</code>: sets the <code>hipSPARSE</code> installation path. The default value is <code>${ROCM_PATH}/hipsparse</code>.</li>
<li>CMake <code>-DHIPFFT_PATH=</code> or environment <code>export HIPFFT_PATH=</code>: sets the <code>hipFFT</code> installation path. The default value is <code>${ROCM_PATH}/hipfft</code>.</li>
<li>CMake <code>-DROCRAND_PATH=</code> or environment <code>export ROCRAND_PATH=</code>: sets the <code>rocRAND</code> installation path. The default value is <code>${ROCM_PATH}/rocrand</code>.</li>
<li>CMake <code>-DHIPRAND_PATH=</code> or environment <code>export HIPRAND_PATH=</code>: sets the <code>hipRAND</code> installation path. The default value is <code>${ROCM_PATH}/hiprand</code>.</li>
<li>environment <code>export CUDA_PATH=</code>: where <code>hipcc</code> can find <code>CUDA</code> if it is not in the default <code>/usr/local/cuda</code> path.</li>
</ul>
<h3><a class="anchor" id="autotoc_md4"></a>
HIP platform detection of AMD and NVIDIA</h3>
<p>By default, Ginkgo uses the output of <code>/opt/rocm/hip/bin/hipconfig --platform</code> to select the backend. The accepted values are either <code>hcc</code> (<code>amd</code> with ROCM &gt;= 4.1) or <code>nvcc</code> (<code>nvidia</code> with ROCM &gt;= 4.1). When on an AMD or NVIDIA system, this should output the correct platform by default. When on a system without GPUs, this should output <code>hcc</code> by default. To change this value, export the environment variable <code>HIP_PLATFORM</code> like so: </p><div class="fragment"><div class="line">export HIP_PLATFORM=nvcc # or nvidia for ROCM &gt;= 4.1</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md5"></a>
Setting platform specific compilation flags</h3>
<p>Platform specific compilation flags can be given through the following CMake variables:</p><ul>
<li><code>-DGINKGO_HIP_COMPILER_FLAGS=</code>: compilation flags given to all platforms.</li>
<li><code>-DGINKGO_HIP_NVCC_COMPILER_FLAGS=</code>: compilation flags given to NVIDIA platforms.</li>
<li><code>-DGINKGO_HIP_CLANG_COMPILER_FLAGS=</code>: compilation flags given to AMD clang compiler.</li>
</ul>
<h2><a class="anchor" id="autotoc_md6"></a>
Third party libraries and packages</h2>
<p>Ginkgo relies on third party packages in different cases. These third party packages can be turned off by disabling the relevant options.</p>
<ul>
<li>GINKGO_BUILD_TESTS=ON: Our tests are implemented with <a href="https://github.com/google/googletest">Google Test</a>;</li>
<li>GINKGO_BUILD_BENCHMARKS=ON: For argument management we use <a href="https://github.com/gflags/gflags">gflags</a> and for JSON parsing we use <a href="https://github.com/nlohmann/json">nlohmann-json</a>;</li>
<li>GINKGO_BUILD_HWLOC=ON: <a href="https://www.open-mpi.org/projects/hwloc">hwloc</a> to detect and control cores and devices.</li>
<li>GINKGO_BUILD_HWLOC=ON and GINKGO_BUILD_TESTS=ON: <a href="https://www.man7.org/linux/man-pages/man3/numa.3.html">libnuma</a> is required when testing the functions provided through MachineTopology.</li>
<li>GINKGO_BUILD_EXAMPLES=ON: <a href="https://opencv.org/">OpenCV</a> is required for some examples, they are disabled when OpenCV is not available.</li>
<li>GINKGO_BUILD_DOC=ON: <a href="https://www.doxygen.nl/">doxygen</a> is required to build the documentation and additionally <a href="https://graphviz.org/">graphviz</a> is required to build the class hierarchy graphs.</li>
<li><a href="http://glaros.dtc.umn.edu/gkhome/metis/metis/overview">METIS</a> is required when using the <code>NestedDissection</code> reordering functionality. If METIS is not found, the functionality is disabled.</li>
<li><a href="https://icl.utk.edu/papi/">PAPI</a> (&gt;= 7.1.0) is required when using the <code>Papi</code> logger. If PAPI is not found, the functionality is disabled.</li>
</ul>
<p>Ginkgo attempts to use pre-installed versions of these package if they match version requirements using <code>find_package</code>. Otherwise, the configuration step will download the files for each of the packages <code>GTest</code>, <code>gflags</code>, <code>nlohmann-json</code> and <code>hwloc</code> and build them internally.</p>
<p>Note that, if the external packages were not installed to the default location, the CMake option <code>-DCMAKE_PREFIX_PATH=&lt;path-list&gt;</code> needs to be set to the semicolon (<code>;</code>) separated list of install paths of these external packages. For more Information, see the <a href="https://cmake.org/cmake/help/v3.9/variable/CMAKE_PREFIX_PATH.html">CMake documentation for CMAKE_PREFIX_PATH</a> for details.</p>
<p>For convenience, the options <code>GINKGO_INSTALL_RPATH[_.*]</code> can be used to bind the installed Ginkgo shared libraries to the path of its dependencies.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
Installing Ginkgo</h2>
<p>To install Ginkgo into the specified folder, execute the following command in the build folder</p>
<div class="fragment"><div class="line">make install</div>
</div><!-- fragment --><p>If the installation prefix (see <code>CMAKE_INSTALL_PREFIX</code>) is not writable for your user, e.g. when installing Ginkgo system-wide, it might be necessary to prefix the call with <code>sudo</code>.</p>
<p>After the installation, CMake can find ginkgo with <code>find_package(Ginkgo)</code>. An example can be found in the <a href="test/test_install/CMakeLists.txt"><code>test_install</code></a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>

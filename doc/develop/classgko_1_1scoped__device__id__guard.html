<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ginkgo: gko::scoped_device_id_guard Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_doc.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Ginkgo
   &#160;<span id="projectnumber">Generated from pipelines/1272374970 branch based on develop. Ginkgo version 1.8.0</span>
   </div>
   <div id="projectbrief">A numerical linear algebra library targeting many-core architectures</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegko.html">gko</a></li><li class="navelem"><a class="el" href="classgko_1_1scoped__device__id__guard.html">scoped_device_id_guard</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classgko_1_1scoped__device__id__guard-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">gko::scoped_device_id_guard Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This move-only class uses RAII to set the device id within a scoped block, if necessary.  
 <a href="classgko_1_1scoped__device__id__guard.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="scoped__device__id__guard_8hpp_source.html">ginkgo/core/base/scoped_device_id_guard.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acc33bf23522f0697b0728c467683a77f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgko_1_1scoped__device__id__guard.html#acc33bf23522f0697b0728c467683a77f">scoped_device_id_guard</a> (const <a class="el" href="classgko_1_1ReferenceExecutor.html">ReferenceExecutor</a> *exec, int device_id)</td></tr>
<tr class="memdesc:acc33bf23522f0697b0728c467683a77f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a scoped device id from an Reference.  <a href="classgko_1_1scoped__device__id__guard.html#acc33bf23522f0697b0728c467683a77f">More...</a><br /></td></tr>
<tr class="separator:acc33bf23522f0697b0728c467683a77f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a793cf06e7d67c04e586a0416c6623623"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgko_1_1scoped__device__id__guard.html#a793cf06e7d67c04e586a0416c6623623">scoped_device_id_guard</a> (const <a class="el" href="classgko_1_1OmpExecutor.html">OmpExecutor</a> *exec, int device_id)</td></tr>
<tr class="memdesc:a793cf06e7d67c04e586a0416c6623623"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a scoped device id from an <a class="el" href="classgko_1_1OmpExecutor.html" title="This is the Executor subclass which represents the OpenMP device (typically CPU).">OmpExecutor</a>.  <a href="classgko_1_1scoped__device__id__guard.html#a793cf06e7d67c04e586a0416c6623623">More...</a><br /></td></tr>
<tr class="separator:a793cf06e7d67c04e586a0416c6623623"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1ec4e747e4b094bb72f63c6c2d71f24"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgko_1_1scoped__device__id__guard.html#aa1ec4e747e4b094bb72f63c6c2d71f24">scoped_device_id_guard</a> (const <a class="el" href="classgko_1_1CudaExecutor.html">CudaExecutor</a> *exec, int device_id)</td></tr>
<tr class="memdesc:aa1ec4e747e4b094bb72f63c6c2d71f24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a scoped device id from an <a class="el" href="classgko_1_1CudaExecutor.html" title="This is the Executor subclass which represents the CUDA device.">CudaExecutor</a>.  <a href="classgko_1_1scoped__device__id__guard.html#aa1ec4e747e4b094bb72f63c6c2d71f24">More...</a><br /></td></tr>
<tr class="separator:aa1ec4e747e4b094bb72f63c6c2d71f24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97bba4ea5903f97038952382e9dcd702"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgko_1_1scoped__device__id__guard.html#a97bba4ea5903f97038952382e9dcd702">scoped_device_id_guard</a> (const <a class="el" href="classgko_1_1HipExecutor.html">HipExecutor</a> *exec, int device_id)</td></tr>
<tr class="memdesc:a97bba4ea5903f97038952382e9dcd702"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a scoped device id from an <a class="el" href="classgko_1_1HipExecutor.html" title="This is the Executor subclass which represents the HIP enhanced device.">HipExecutor</a>.  <a href="classgko_1_1scoped__device__id__guard.html#a97bba4ea5903f97038952382e9dcd702">More...</a><br /></td></tr>
<tr class="separator:a97bba4ea5903f97038952382e9dcd702"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cc19e477c4992b07b22491841bfd9e0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgko_1_1scoped__device__id__guard.html#a3cc19e477c4992b07b22491841bfd9e0">scoped_device_id_guard</a> (const <a class="el" href="classgko_1_1DpcppExecutor.html">DpcppExecutor</a> *exec, int device_id)</td></tr>
<tr class="memdesc:a3cc19e477c4992b07b22491841bfd9e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a scoped device id from an <a class="el" href="classgko_1_1DpcppExecutor.html" title="This is the Executor subclass which represents a DPC++ enhanced device.">DpcppExecutor</a>.  <a href="classgko_1_1scoped__device__id__guard.html#a3cc19e477c4992b07b22491841bfd9e0">More...</a><br /></td></tr>
<tr class="separator:a3cc19e477c4992b07b22491841bfd9e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae28c802d71f258d484e466aa9f403a43"><td class="memItemLeft" align="right" valign="top"><a id="ae28c802d71f258d484e466aa9f403a43"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>scoped_device_id_guard</b> (const <a class="el" href="classgko_1_1scoped__device__id__guard.html">scoped_device_id_guard</a> &amp;)=delete</td></tr>
<tr class="separator:ae28c802d71f258d484e466aa9f403a43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad29ea9125866e0b6dcc9ebbd5485820d"><td class="memItemLeft" align="right" valign="top"><a id="ad29ea9125866e0b6dcc9ebbd5485820d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>scoped_device_id_guard</b> (<a class="el" href="classgko_1_1scoped__device__id__guard.html">scoped_device_id_guard</a> &amp;&amp;)=default</td></tr>
<tr class="separator:ad29ea9125866e0b6dcc9ebbd5485820d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a189e18a3cd01610b4dfd7bf065a039e5"><td class="memItemLeft" align="right" valign="top"><a id="a189e18a3cd01610b4dfd7bf065a039e5"></a>
<a class="el" href="classgko_1_1scoped__device__id__guard.html">scoped_device_id_guard</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classgko_1_1scoped__device__id__guard.html">scoped_device_id_guard</a> &amp;)=delete</td></tr>
<tr class="separator:a189e18a3cd01610b4dfd7bf065a039e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef3f6878c8d0662e7b7c16411118bbd8"><td class="memItemLeft" align="right" valign="top"><a id="aef3f6878c8d0662e7b7c16411118bbd8"></a>
<a class="el" href="classgko_1_1scoped__device__id__guard.html">scoped_device_id_guard</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="classgko_1_1scoped__device__id__guard.html">scoped_device_id_guard</a> &amp;&amp;)=default</td></tr>
<tr class="separator:aef3f6878c8d0662e7b7c16411118bbd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This move-only class uses RAII to set the device id within a scoped block, if necessary. </p>
<p>The class behaves similar to std::scoped_lock. The scoped guard will make sure that the device code is run on the correct device within one scoped block, when run with multiple devices. Depending on the executor it will record the current device id and set the device id to the one being passed in. After the scope has been exited, the destructor sets the device_id back to the one before entering the scope. The <a class="el" href="classgko_1_1OmpExecutor.html" title="This is the Executor subclass which represents the OpenMP device (typically CPU).">OmpExecutor</a> and <a class="el" href="classgko_1_1DpcppExecutor.html" title="This is the Executor subclass which represents a DPC++ enhanced device.">DpcppExecutor</a> don't require setting an device id, so in those cases, the class is a no-op.</p>
<p>The device id scope has to be constructed from a executor with concrete type (not plain <a class="el" href="classgko_1_1Executor.html" title="The first step in using the Ginkgo library consists of creating an executor.">Executor</a>) and a device id. Only the type of the executor object is relevant, so the pointer will not be accessed, and may even be a nullptr. From the executor type the correct derived class of detail::generic_scoped_device_id_guard is picked. The following illustrates the usage of this class: </p><div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="classgko_1_1scoped__device__id__guard.html#acc33bf23522f0697b0728c467683a77f">scoped_device_id_guard</a> g{static_cast&lt;CudaExecutor&gt;(<span class="keyword">nullptr</span>), 1};</div>
<div class="line">  <span class="comment">// now the device id is set to 1</span></div>
<div class="line">}</div>
<div class="line"><span class="comment">// now the device id is reverted again</span></div>
</div><!-- fragment --> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="acc33bf23522f0697b0728c467683a77f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc33bf23522f0697b0728c467683a77f">&#9670;&nbsp;</a></span>scoped_device_id_guard() <span class="overload">[1/5]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gko::scoped_device_id_guard::scoped_device_id_guard </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgko_1_1ReferenceExecutor.html">ReferenceExecutor</a> *&#160;</td>
          <td class="paramname"><em>exec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>device_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a scoped device id from an Reference. </p>
<p>The resulting object will be a noop.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">exec</td><td>Not used. </td></tr>
    <tr><td class="paramname">device_id</td><td>Not used. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a793cf06e7d67c04e586a0416c6623623"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a793cf06e7d67c04e586a0416c6623623">&#9670;&nbsp;</a></span>scoped_device_id_guard() <span class="overload">[2/5]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gko::scoped_device_id_guard::scoped_device_id_guard </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgko_1_1OmpExecutor.html">OmpExecutor</a> *&#160;</td>
          <td class="paramname"><em>exec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>device_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a scoped device id from an <a class="el" href="classgko_1_1OmpExecutor.html" title="This is the Executor subclass which represents the OpenMP device (typically CPU).">OmpExecutor</a>. </p>
<p>The resulting object will be a noop.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">exec</td><td>Not used. </td></tr>
    <tr><td class="paramname">device_id</td><td>Not used. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa1ec4e747e4b094bb72f63c6c2d71f24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1ec4e747e4b094bb72f63c6c2d71f24">&#9670;&nbsp;</a></span>scoped_device_id_guard() <span class="overload">[3/5]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gko::scoped_device_id_guard::scoped_device_id_guard </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgko_1_1CudaExecutor.html">CudaExecutor</a> *&#160;</td>
          <td class="paramname"><em>exec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>device_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a scoped device id from an <a class="el" href="classgko_1_1CudaExecutor.html" title="This is the Executor subclass which represents the CUDA device.">CudaExecutor</a>. </p>
<p>The resulting object will set the cuda device id accordingly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">exec</td><td>Not used. </td></tr>
    <tr><td class="paramname">device_id</td><td>The device id to use within the scope. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a97bba4ea5903f97038952382e9dcd702"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97bba4ea5903f97038952382e9dcd702">&#9670;&nbsp;</a></span>scoped_device_id_guard() <span class="overload">[4/5]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gko::scoped_device_id_guard::scoped_device_id_guard </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgko_1_1HipExecutor.html">HipExecutor</a> *&#160;</td>
          <td class="paramname"><em>exec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>device_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a scoped device id from an <a class="el" href="classgko_1_1HipExecutor.html" title="This is the Executor subclass which represents the HIP enhanced device.">HipExecutor</a>. </p>
<p>The resulting object will set the hip device id accordingly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">exec</td><td>Not used. </td></tr>
    <tr><td class="paramname">device_id</td><td>The device id to use within the scope. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3cc19e477c4992b07b22491841bfd9e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cc19e477c4992b07b22491841bfd9e0">&#9670;&nbsp;</a></span>scoped_device_id_guard() <span class="overload">[5/5]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gko::scoped_device_id_guard::scoped_device_id_guard </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgko_1_1DpcppExecutor.html">DpcppExecutor</a> *&#160;</td>
          <td class="paramname"><em>exec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>device_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a scoped device id from an <a class="el" href="classgko_1_1DpcppExecutor.html" title="This is the Executor subclass which represents a DPC++ enhanced device.">DpcppExecutor</a>. </p>
<p>The resulting object will be a noop.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">exec</td><td>Not used. </td></tr>
    <tr><td class="paramname">device_id</td><td>Not used. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>ginkgo/core/base/<a class="el" href="scoped__device__id__guard_8hpp_source.html">scoped_device_id_guard.hpp</a></li>
</ul>
</div><!-- contents -->
<div class="ttc" id="aclassgko_1_1scoped__device__id__guard_html_acc33bf23522f0697b0728c467683a77f"><div class="ttname"><a href="classgko_1_1scoped__device__id__guard.html#acc33bf23522f0697b0728c467683a77f">gko::scoped_device_id_guard::scoped_device_id_guard</a></div><div class="ttdeci">scoped_device_id_guard(const ReferenceExecutor *exec, int device_id)</div><div class="ttdoc">Create a scoped device id from an Reference.</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>

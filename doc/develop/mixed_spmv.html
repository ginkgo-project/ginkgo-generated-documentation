<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ginkgo: The mixed-spmv program</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_doc.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Ginkgo
   &#160;<span id="projectnumber">Generated from pipelines/1507438938 branch based on develop. Ginkgo version 1.9.0</span>
   </div>
   <div id="projectbrief">A numerical linear algebra library targeting many-core architectures</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">The mixed-spmv program </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The mixed spmv example..</p>
<p> 
<table class="example" width="50%">
<tr><th colspan="2"><b><small>Table of contents</small></b></th></tr>
<tr><td width="50%" valign="top">
<ol>
  <li> <a href="#Intro" class=bold>Introduction</a>
    <ul>
        <li><a href="#Abouttheexample"> About the example </a>
    </ul>
  <li> <a href="#CommProg" class=bold>The commented program</a>
    <ul>
        <li><a href="#Includefiles">Include files</a>
        <li><a href="#Wheredoyouwanttorunyouroperation">Where do you want to run your operation?</a>
        <li><a href="#Preparingyourdataandtransfertotheproperdevice">Preparing your data and transfer to the proper device.</a>
        <li><a href="#Measurethetimeofapply">Measure the time of apply</a>
      </ul>
</ol></td><td width="50%" valign="top"><ol>
  <li value="3"> <a href="#Results" class=bold>Results</a>
    <ul>
        <li><a href="#Commentsaboutprogramminganddebugging"> Comments about programming and debugging </a>
    </ul>
  <li> <a href="#PlainProg" class=bold>The plain program</a>
</ol> </td> </tr> </table>
 <a class="anchor" id="Intro"></a> <a class="anchor" id="Introduction"></a></p><h1>Introduction</h1>
<p>This mixed spmv example should give the usage of Ginkgo mixed precision. This example is meant for you to understand how Ginkgo works with different precision of data. We encourage you to play with the code, change the parameters and see what is best suited for your purposes.</p>
<p><a class="anchor" id="Abouttheexample"></a></p><h3>About the example </h3>
<p>Each example has the following sections: </p><ol>
<li>
<b>Introduction:</b>This gives an overview of the example and mentions any interesting aspects in the example that might help the reader. </li>
<li>
<b>The commented program:</b> This section is intended for you to understand the details of the example so that you can play with it and understand Ginkgo and its features better. </li>
<li>
<b>Results:</b> This section shows the results of the code when run. Though the results may not be completely the same, you can expect the behaviour to be similar. </li>
<li>
<b>The plain program:</b> This is the complete code without any comments to have an complete overview of the code. </li>
</ol>
<p><a class="anchor" id="CommProg"></a> </p><h1>The commented program</h1>
<div class="fragment"><div class="line"> * @param value_dist  distribution of <a class="code" href="namespacegko.html#ae749a5ea11a93c1bcc9158d9a6e9fb68af1f713c9e000f5d3f280adbd124df4f5">array</a> values</div>
<div class="line"> * @param engine  a random engine</div>
<div class="line"> *</div>
<div class="line"> * @<span class="keywordflow">return</span> ValueType</div>
<div class="line"> * /</div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> ValueType, <span class="keyword">typename</span> ValueDistribution, <span class="keyword">typename</span> Engine&gt;</div>
<div class="line"><span class="keyword">typename</span> std::enable_if&lt;!gko::is_complex_s&lt;ValueType&gt;::value, ValueType&gt;::type</div>
<div class="line">get_rand_value(ValueDistribution&amp;&amp; value_dist, Engine&amp;&amp; gen)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> value_dist(gen);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">/ **</div>
<div class="line"> * Specialization <span class="keywordflow">for</span> complex types.</div>
<div class="line"> *</div>
<div class="line"> * @copydoc get_rand_value</div>
<div class="line"> * /</div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> ValueType, <span class="keyword">typename</span> ValueDistribution, <span class="keyword">typename</span> Engine&gt;</div>
<div class="line"><span class="keyword">typename</span> std::enable_if&lt;gko::is_complex_s&lt;ValueType&gt;::value, ValueType&gt;::type</div>
<div class="line">get_rand_value(ValueDistribution&amp;&amp; value_dist, Engine&amp;&amp; gen)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> ValueType(value_dist(gen), value_dist(gen));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">/ **</div>
<div class="line"> * timing the apply <a class="code" href="namespacegko_1_1log.html#a15f71654c6c4f4defc95f9359343fa27af7235a61fdc3adc78d866fd8085d44db">operation</a> A-&gt;apply(b, x). It will runs 2 warmup and get</div>
<div class="line"> * average time among 10 times.</div>
<div class="line"> *</div>
<div class="line"> * @<span class="keywordflow">return</span> seconds</div>
<div class="line"> * /</div>
<div class="line"><span class="keywordtype">double</span> timing(std::shared_ptr&lt;const gko::Executor&gt; exec,</div>
<div class="line">              std::shared_ptr&lt;const gko::LinOp&gt; A,</div>
<div class="line">              std::shared_ptr&lt;const gko::LinOp&gt; b,</div>
<div class="line">              std::shared_ptr&lt;gko::LinOp&gt; x)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> warmup = 2;</div>
<div class="line">    <span class="keywordtype">int</span> rep = 10;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; warmup; i++) {</div>
<div class="line">        A-&gt;apply(b, x);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">double</span> total_sec = 0;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; rep; i++) {</div>
</div><!-- fragment --><p>always clone the x in each apply</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> xx = x-&gt;clone();</div>
</div><!-- fragment --><p>synchronize to make sure data is already on device</p>
<div class="fragment"><div class="line">exec-&gt;synchronize();</div>
<div class="line"><span class="keyword">auto</span> start = std::chrono::steady_clock::now();</div>
<div class="line">A-&gt;apply(b, xx);</div>
</div><!-- fragment --><p>synchronize to make sure the operation is done</p>
<div class="fragment"><div class="line">exec-&gt;synchronize();</div>
<div class="line"><span class="keyword">auto</span> stop = std::chrono::steady_clock::now();</div>
</div><!-- fragment --><p>get the duration in seconds</p>
<div class="fragment"><div class="line">std::chrono::duration&lt;double&gt; duration_time = stop - start;</div>
<div class="line">total_sec += duration_time.count();</div>
<div class="line"><span class="keywordflow">if</span> (i + 1 == rep) {</div>
</div><!-- fragment --><p>copy the result back to x</p>
<div class="fragment"><div class="line">            x-&gt;copy_from(xx);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> total_sec / rep;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">}  <span class="comment">// namespace</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])</div>
<div class="line">{</div>
</div><!-- fragment --><p>Use some shortcuts. In Ginkgo, vectors are seen as a <a class="el" href="classgko_1_1matrix_1_1Dense.html" title="Dense is a matrix format which explicitly stores all values of the matrix.">gko::matrix::Dense</a> with one column/one row. The advantage of this concept is that using multiple vectors is a now a natural extension of adding columns/rows are necessary.</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> HighPrecision = double;</div>
<div class="line"><span class="keyword">using</span> RealValueType = <a class="code" href="namespacegko.html#afd46d554050c4ae90e84ea4fcd9a41f3">gko::remove_complex&lt;HighPrecision&gt;</a>;</div>
<div class="line"><span class="keyword">using</span> LowPrecision = float;</div>
<div class="line"><span class="keyword">using</span> IndexType = int;</div>
<div class="line"><span class="keyword">using</span> hp_vec = <a class="code" href="classgko_1_1matrix_1_1Dense.html">gko::matrix::Dense&lt;HighPrecision&gt;</a>;</div>
<div class="line"><span class="keyword">using</span> lp_vec = <a class="code" href="classgko_1_1matrix_1_1Dense.html">gko::matrix::Dense&lt;LowPrecision&gt;</a>;</div>
<div class="line"><span class="keyword">using</span> real_vec = <a class="code" href="classgko_1_1matrix_1_1Dense.html">gko::matrix::Dense&lt;RealValueType&gt;</a>;</div>
</div><!-- fragment --><p>The <a class="el" href="classgko_1_1matrix_1_1Ell.html" title="ELL is a matrix format where stride with explicit zeros is used such that all rows have the same numb...">gko::matrix::Ell</a> class is used here, but any other matrix class such as <a class="el" href="classgko_1_1matrix_1_1Coo.html" title="COO stores a matrix in the coordinate matrix format.">gko::matrix::Coo</a>, <a class="el" href="classgko_1_1matrix_1_1Hybrid.html" title="HYBRID is a matrix format which splits the matrix into ELLPACK and COO format.">gko::matrix::Hybrid</a>, <a class="el" href="classgko_1_1matrix_1_1Csr.html" title="CSR is a matrix format which stores only the nonzero coefficients by compressing each row of the matr...">gko::matrix::Csr</a> or <a class="el" href="classgko_1_1matrix_1_1Sellp.html" title="SELL-P is a matrix format similar to ELL format.">gko::matrix::Sellp</a> could also be used. Note. the behavior will depends GINKGO_MIXED_PRECISION flags and the actual implementation from different matrices.</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> hp_mtx = <a class="code" href="classgko_1_1matrix_1_1Ell.html">gko::matrix::Ell&lt;HighPrecision, IndexType&gt;</a>;</div>
<div class="line"><span class="keyword">using</span> lp_mtx = <a class="code" href="classgko_1_1matrix_1_1Ell.html">gko::matrix::Ell&lt;LowPrecision, IndexType&gt;</a>;</div>
</div><!-- fragment --><p>Print the ginkgo version information.</p>
<div class="fragment"><div class="line">std::cout &lt;&lt; <a class="code" href="classgko_1_1version__info.html#a6daeb8a087cfb57fa055526fc133d8eb">gko::version_info::get</a>() &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (argc == 2 &amp;&amp; (std::string(argv[1]) == <span class="stringliteral">&quot;--help&quot;</span>)) {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Usage: &quot;</span> &lt;&lt; argv[0] &lt;&lt; <span class="stringliteral">&quot; [executor] &quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::exit(-1);</div>
<div class="line">}</div>
</div><!-- fragment --><p><a class="anchor" id="Wheredoyouwanttorunyouroperation"></a> </p><h3>Where do you want to run your operation?</h3>
<p>The <a class="el" href="classgko_1_1Executor.html" title="The first step in using the Ginkgo library consists of creating an executor.">gko::Executor</a> class is one of the cornerstones of Ginkgo. Currently, we have support for an <a class="el" href="classgko_1_1OmpExecutor.html" title="This is the Executor subclass which represents the OpenMP device (typically CPU).">gko::OmpExecutor</a>, which uses OpenMP multi-threading in most of its kernels, a <a class="el" href="classgko_1_1ReferenceExecutor.html" title="This is a specialization of the OmpExecutor, which runs the reference implementations of the kernels ...">gko::ReferenceExecutor</a>, a single threaded specialization of the OpenMP executor and a <a class="el" href="classgko_1_1CudaExecutor.html" title="This is the Executor subclass which represents the CUDA device.">gko::CudaExecutor</a> which runs the code on a NVIDIA GPU if available. </p><dl class="section note"><dt>Note</dt><dd>With the help of C++, you see that you only ever need to change the executor and all the other functions/ routines within Ginkgo should automatically work and run on the executor with any other changes.</dd></dl>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> executor_string = argc &gt;= 2 ? argv[1] : <span class="stringliteral">&quot;reference&quot;</span>;</div>
<div class="line">std::map&lt;std::string, std::function&lt;std::shared_ptr&lt;gko::Executor&gt;()&gt;&gt;</div>
<div class="line">    exec_map{</div>
<div class="line">        {<span class="stringliteral">&quot;omp&quot;</span>, [] { <span class="keywordflow">return</span> <a class="code" href="classgko_1_1OmpExecutor.html#a8930142a1913bcbcac4fb6c917f930d9">gko::OmpExecutor::create</a>(); }},</div>
<div class="line">        {<span class="stringliteral">&quot;cuda&quot;</span>,</div>
<div class="line">         [] {</div>
<div class="line">             <span class="keywordflow">return</span> <a class="code" href="classgko_1_1CudaExecutor.html#a6c423656c7c0eb53810cb77bb4a66d15">gko::CudaExecutor::create</a>(0,</div>
<div class="line">                                              <a class="code" href="classgko_1_1OmpExecutor.html#a8930142a1913bcbcac4fb6c917f930d9">gko::OmpExecutor::create</a>());</div>
<div class="line">         }},</div>
<div class="line">        {<span class="stringliteral">&quot;hip&quot;</span>,</div>
<div class="line">         [] {</div>
<div class="line">             <span class="keywordflow">return</span> <a class="code" href="classgko_1_1HipExecutor.html#aa0701fe1303e03a8331da7e95008100d">gko::HipExecutor::create</a>(0, <a class="code" href="classgko_1_1OmpExecutor.html#a8930142a1913bcbcac4fb6c917f930d9">gko::OmpExecutor::create</a>());</div>
<div class="line">         }},</div>
<div class="line">        {<span class="stringliteral">&quot;dpcpp&quot;</span>,</div>
<div class="line">         [] {</div>
<div class="line">             <span class="keywordflow">return</span> <a class="code" href="classgko_1_1DpcppExecutor.html#ae9b875dfe3af7f3f3f24071bfb2f895e">gko::DpcppExecutor::create</a>(0,</div>
<div class="line">                                               <a class="code" href="classgko_1_1OmpExecutor.html#a8930142a1913bcbcac4fb6c917f930d9">gko::OmpExecutor::create</a>());</div>
<div class="line">         }},</div>
<div class="line">        {<span class="stringliteral">&quot;reference&quot;</span>, [] { <span class="keywordflow">return</span> gko::ReferenceExecutor::create(); }}};</div>
</div><!-- fragment --><p>executor where Ginkgo will perform the computation</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> exec = exec_map.at(executor_string)();  <span class="comment">// throws if not valid</span></div>
</div><!-- fragment --><p><a class="anchor" id="Preparingyourdataandtransfertotheproperdevice"></a> </p><h3>Preparing your data and transfer to the proper device.</h3>
<p>Read the matrix using the read function and set the right hand side randomly. </p><dl class="section note"><dt>Note</dt><dd>Ginkgo uses C++ smart pointers to automatically manage memory. To this end, we use our own object ownership transfer functions that under the hood call the required smart pointer functions to manage object ownership. <a class="el" href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58" title="Marks the object pointed to by p as shared.">gko::share</a> and <a class="el" href="namespacegko.html#acbd3fd6d07e498892881e8e2ab0b4167" title="Marks that the object pointed to by p can be given to the callee.">gko::give</a> are the functions that you would need to use.</dd></dl>
<p>read the matrix into HighPrecision and LowPrecision.</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> hp_A = <a class="code" href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">share</a>(gko::read&lt;hp_mtx&gt;(std::ifstream(<span class="stringliteral">&quot;data/A.mtx&quot;</span>), exec));</div>
<div class="line"><span class="keyword">auto</span> lp_A = <a class="code" href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">share</a>(gko::read&lt;lp_mtx&gt;(std::ifstream(<span class="stringliteral">&quot;data/A.mtx&quot;</span>), exec));</div>
</div><!-- fragment --><p>Set the shortcut for each dimension</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> A_dim = hp_A-&gt;get_size();</div>
<div class="line"><span class="keyword">auto</span> b_dim = <a class="code" href="structgko_1_1dim.html">gko::dim&lt;2&gt;</a>{A_dim[1], 1};</div>
<div class="line"><span class="keyword">auto</span> x_dim = <a class="code" href="structgko_1_1dim.html">gko::dim&lt;2&gt;</a>{A_dim[0], b_dim[1]};</div>
<div class="line"><span class="keyword">auto</span> host_b = hp_vec::create(exec-&gt;get_master(), b_dim);</div>
</div><!-- fragment --><p>fill the b vector with some random data</p>
<div class="fragment"><div class="line">std::default_random_engine rand_engine(32);</div>
<div class="line"><span class="keyword">auto</span> dist = std::uniform_real_distribution&lt;RealValueType&gt;(0.0, 1.0);</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; host_b-&gt;get_size()[0]; i++) {</div>
<div class="line">    host_b-&gt;at(i, 0) = get_rand_value&lt;HighPrecision&gt;(dist, rand_engine);</div>
<div class="line">}</div>
</div><!-- fragment --><p>copy the data from host to device</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> hp_b = <a class="code" href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">share</a>(<a class="code" href="namespacegko.html#a1beb80750459e4201aa9d882d2d074c3">gko::clone</a>(exec, host_b));</div>
<div class="line"><span class="keyword">auto</span> lp_b = <a class="code" href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">share</a>(lp_vec::create(exec));</div>
<div class="line">lp_b-&gt;copy_from(hp_b);</div>
</div><!-- fragment --><p>create several result x vector in different precision</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> hp_x = <a class="code" href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">share</a>(hp_vec::create(exec, x_dim));</div>
<div class="line"><span class="keyword">auto</span> lp_x = <a class="code" href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">share</a>(lp_vec::create(exec, x_dim));</div>
<div class="line"><span class="keyword">auto</span> hplp_x = <a class="code" href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">share</a>(hp_x-&gt;clone());</div>
<div class="line"><span class="keyword">auto</span> lplp_x = <a class="code" href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">share</a>(hp_x-&gt;clone());</div>
<div class="line"><span class="keyword">auto</span> lphp_x = <a class="code" href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">share</a>(hp_x-&gt;clone());</div>
</div><!-- fragment --><p><a class="anchor" id="Measurethetimeofapply"></a> </p><h3>Measure the time of apply</h3>
<p>We measure the time among different combination of apply operation.</p>
<p>Hp * Hp -&gt; Hp</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> hp_sec = timing(exec, hp_A, hp_b, hp_x);</div>
</div><!-- fragment --><p>Lp * Lp -&gt; Lp</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> lp_sec = timing(exec, lp_A, lp_b, lp_x);</div>
</div><!-- fragment --><p>Hp * Lp -&gt; Hp</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> hplp_sec = timing(exec, hp_A, lp_b, hplp_x);</div>
</div><!-- fragment --><p>Lp * Lp -&gt; Hp</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> lplp_sec = timing(exec, lp_A, lp_b, lplp_x);</div>
</div><!-- fragment --><p>Lp * Hp -&gt; Hp</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> lphp_sec = timing(exec, lp_A, hp_b, lphp_x);</div>
</div><!-- fragment --><p>To measure error of result. neg_one is an object that represent the number -1.0 which allows for a uniform interface when computing on any device. To compute the residual, all you need to do is call the add_scaled method, which in this case is an axpy and equivalent to the LAPACK axpy routine. Finally, you compute the euclidean 2-norm with the compute_norm2 function.</p>
<div class="fragment"><div class="line">    <span class="keyword">auto</span> neg_one = gko::initialize&lt;hp_vec&gt;({-1.0}, exec);</div>
<div class="line">    <span class="keyword">auto</span> hp_x_norm = gko::initialize&lt;real_vec&gt;({0.0}, exec-&gt;get_master());</div>
<div class="line">    <span class="keyword">auto</span> lp_diff_norm = gko::initialize&lt;real_vec&gt;({0.0}, exec-&gt;get_master());</div>
<div class="line">    <span class="keyword">auto</span> hplp_diff_norm = gko::initialize&lt;real_vec&gt;({0.0}, exec-&gt;get_master());</div>
<div class="line">    <span class="keyword">auto</span> lplp_diff_norm = gko::initialize&lt;real_vec&gt;({0.0}, exec-&gt;get_master());</div>
<div class="line">    <span class="keyword">auto</span> lphp_diff_norm = gko::initialize&lt;real_vec&gt;({0.0}, exec-&gt;get_master());</div>
<div class="line">    <span class="keyword">auto</span> lp_diff = hp_x-&gt;clone();</div>
<div class="line">    <span class="keyword">auto</span> hplp_diff = hp_x-&gt;clone();</div>
<div class="line">    <span class="keyword">auto</span> lplp_diff = hp_x-&gt;clone();</div>
<div class="line">    <span class="keyword">auto</span> lphp_diff = hp_x-&gt;clone();</div>
<div class="line"> </div>
<div class="line">    hp_x-&gt;compute_norm2(hp_x_norm);</div>
<div class="line">    lp_diff-&gt;add_scaled(neg_one, lp_x);</div>
<div class="line">    lp_diff-&gt;compute_norm2(lp_diff_norm);</div>
<div class="line">    hplp_diff-&gt;add_scaled(neg_one, hplp_x);</div>
<div class="line">    hplp_diff-&gt;compute_norm2(hplp_diff_norm);</div>
<div class="line">    lplp_diff-&gt;add_scaled(neg_one, lplp_x);</div>
<div class="line">    lplp_diff-&gt;compute_norm2(lplp_diff_norm);</div>
<div class="line">    lphp_diff-&gt;add_scaled(neg_one, lphp_x);</div>
<div class="line">    lphp_diff-&gt;compute_norm2(lphp_diff_norm);</div>
<div class="line">    exec-&gt;synchronize();</div>
<div class="line"> </div>
<div class="line">    std::cout.precision(10);</div>
<div class="line">    std::cout &lt;&lt; std::scientific;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;High Precision time(s): &quot;</span> &lt;&lt; hp_sec &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;High Precision result norm: &quot;</span> &lt;&lt; hp_x_norm-&gt;at(0)</div>
<div class="line">              &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Low Precision time(s): &quot;</span> &lt;&lt; lp_sec &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Low Precision relative error: &quot;</span></div>
<div class="line">              &lt;&lt; lp_diff_norm-&gt;at(0) / hp_x_norm-&gt;at(0) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Hp * Lp -&gt; Hp time(s): &quot;</span> &lt;&lt; hplp_sec &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Hp * Lp -&gt; Hp relative error: &quot;</span></div>
<div class="line">              &lt;&lt; hplp_diff_norm-&gt;at(0) / hp_x_norm-&gt;at(0) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Lp * Lp -&gt; Hp time(s): &quot;</span> &lt;&lt; lplp_sec &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Lp * Lp -&gt; Hp relative error: &quot;</span></div>
<div class="line">              &lt;&lt; lplp_diff_norm-&gt;at(0) / hp_x_norm-&gt;at(0) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Lp * Hp -&gt; Hp time(s): &quot;</span> &lt;&lt; lplp_sec &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Lp * Hp -&gt; Hp relative error: &quot;</span></div>
<div class="line">              &lt;&lt; lphp_diff_norm-&gt;at(0) / hp_x_norm-&gt;at(0) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><p> <a class="anchor" id="Results"></a></p><h1>Results</h1>
<p>The following is the expected result (omp):</p>
<div class="fragment"><div class="line">High Precision time(s): 2.0568800000e-05</div>
<div class="line">High Precision result norm: 1.7725534898e+05</div>
<div class="line">Low Precision time(s): 2.0955600000e-05</div>
<div class="line">Low Precision relative error: 9.1052887738e-08</div>
<div class="line">Hp * Lp -&gt; Hp time(s): 2.1186100000e-05</div>
<div class="line">Hp * Lp -&gt; Hp relative error: 3.7799774251e-08</div>
<div class="line">Lp * Lp -&gt; Hp time(s): 2.0312300000e-05</div>
<div class="line">Lp * Lp -&gt; Hp relative error: 5.7910008031e-08</div>
<div class="line">Lp * Hp -&gt; Hp time(s): 2.0312300000e-05</div>
<div class="line">Lp * Hp -&gt; Hp relative error: 3.7173133506e-08</div>
</div><!-- fragment --><p><a class="anchor" id="Commentsaboutprogramminganddebugging"></a></p><h3>Comments about programming and debugging </h3>
<p><a class="anchor" id="PlainProg"></a> </p><h1>The plain program</h1>
<div class="fragment"><div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;ginkgo/ginkgo.hpp&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;fstream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;chrono&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;random&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span>{</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> ValueType, <span class="keyword">typename</span> ValueDistribution, <span class="keyword">typename</span> Engine&gt;</div>
<div class="line"><span class="keyword">typename</span> std::enable_if&lt;!gko::is_complex_s&lt;ValueType&gt;::value, ValueType&gt;::type</div>
<div class="line">get_rand_value(ValueDistribution&amp;&amp; value_dist, Engine&amp;&amp; gen)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> value_dist(gen);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> ValueType, <span class="keyword">typename</span> ValueDistribution, <span class="keyword">typename</span> Engine&gt;</div>
<div class="line"><span class="keyword">typename</span> std::enable_if&lt;gko::is_complex_s&lt;ValueType&gt;::value, ValueType&gt;::type</div>
<div class="line">get_rand_value(ValueDistribution&amp;&amp; value_dist, Engine&amp;&amp; gen)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> ValueType(value_dist(gen), value_dist(gen));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">double</span> timing(std::shared_ptr&lt;const gko::Executor&gt; exec,</div>
<div class="line">              std::shared_ptr&lt;const gko::LinOp&gt; A,</div>
<div class="line">              std::shared_ptr&lt;const gko::LinOp&gt; b,</div>
<div class="line">              std::shared_ptr&lt;gko::LinOp&gt; x)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> warmup = 2;</div>
<div class="line">    <span class="keywordtype">int</span> rep = 10;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; warmup; i++) {</div>
<div class="line">        A-&gt;apply(b, x);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">double</span> total_sec = 0;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; rep; i++) {</div>
<div class="line">        <span class="keyword">auto</span> xx = x-&gt;clone();</div>
<div class="line">        exec-&gt;synchronize();</div>
<div class="line">        <span class="keyword">auto</span> start = std::chrono::steady_clock::now();</div>
<div class="line">        A-&gt;apply(b, xx);</div>
<div class="line">        exec-&gt;synchronize();</div>
<div class="line">        <span class="keyword">auto</span> stop = std::chrono::steady_clock::now();</div>
<div class="line">        std::chrono::duration&lt;double&gt; duration_time = stop - start;</div>
<div class="line">        total_sec += duration_time.count();</div>
<div class="line">        <span class="keywordflow">if</span> (i + 1 == rep) {</div>
<div class="line">            x-&gt;copy_from(xx);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> total_sec / rep;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">}  <span class="comment">// namespace</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">using</span> HighPrecision = double;</div>
<div class="line">    <span class="keyword">using</span> RealValueType = <a class="code" href="namespacegko.html#afd46d554050c4ae90e84ea4fcd9a41f3">gko::remove_complex&lt;HighPrecision&gt;</a>;</div>
<div class="line">    <span class="keyword">using</span> LowPrecision = float;</div>
<div class="line">    <span class="keyword">using</span> IndexType = int;</div>
<div class="line">    <span class="keyword">using</span> hp_vec = <a class="code" href="classgko_1_1matrix_1_1Dense.html">gko::matrix::Dense&lt;HighPrecision&gt;</a>;</div>
<div class="line">    <span class="keyword">using</span> lp_vec = <a class="code" href="classgko_1_1matrix_1_1Dense.html">gko::matrix::Dense&lt;LowPrecision&gt;</a>;</div>
<div class="line">    <span class="keyword">using</span> real_vec = <a class="code" href="classgko_1_1matrix_1_1Dense.html">gko::matrix::Dense&lt;RealValueType&gt;</a>;</div>
<div class="line">    <span class="keyword">using</span> hp_mtx = <a class="code" href="classgko_1_1matrix_1_1Ell.html">gko::matrix::Ell&lt;HighPrecision, IndexType&gt;</a>;</div>
<div class="line">    <span class="keyword">using</span> lp_mtx = <a class="code" href="classgko_1_1matrix_1_1Ell.html">gko::matrix::Ell&lt;LowPrecision, IndexType&gt;</a>;</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <a class="code" href="classgko_1_1version__info.html#a6daeb8a087cfb57fa055526fc133d8eb">gko::version_info::get</a>() &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (argc == 2 &amp;&amp; (std::string(argv[1]) == <span class="stringliteral">&quot;--help&quot;</span>)) {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Usage: &quot;</span> &lt;&lt; argv[0] &lt;&lt; <span class="stringliteral">&quot; [executor] &quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        std::exit(-1);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> executor_string = argc &gt;= 2 ? argv[1] : <span class="stringliteral">&quot;reference&quot;</span>;</div>
<div class="line">    std::map&lt;std::string, std::function&lt;std::shared_ptr&lt;gko::Executor&gt;()&gt;&gt;</div>
<div class="line">        exec_map{</div>
<div class="line">            {<span class="stringliteral">&quot;omp&quot;</span>, [] { <span class="keywordflow">return</span> <a class="code" href="classgko_1_1OmpExecutor.html#a8930142a1913bcbcac4fb6c917f930d9">gko::OmpExecutor::create</a>(); }},</div>
<div class="line">            {<span class="stringliteral">&quot;cuda&quot;</span>,</div>
<div class="line">             [] {</div>
<div class="line">                 <span class="keywordflow">return</span> <a class="code" href="classgko_1_1CudaExecutor.html#a6c423656c7c0eb53810cb77bb4a66d15">gko::CudaExecutor::create</a>(0,</div>
<div class="line">                                                  <a class="code" href="classgko_1_1OmpExecutor.html#a8930142a1913bcbcac4fb6c917f930d9">gko::OmpExecutor::create</a>());</div>
<div class="line">             }},</div>
<div class="line">            {<span class="stringliteral">&quot;hip&quot;</span>,</div>
<div class="line">             [] {</div>
<div class="line">                 <span class="keywordflow">return</span> <a class="code" href="classgko_1_1HipExecutor.html#aa0701fe1303e03a8331da7e95008100d">gko::HipExecutor::create</a>(0, <a class="code" href="classgko_1_1OmpExecutor.html#a8930142a1913bcbcac4fb6c917f930d9">gko::OmpExecutor::create</a>());</div>
<div class="line">             }},</div>
<div class="line">            {<span class="stringliteral">&quot;dpcpp&quot;</span>,</div>
<div class="line">             [] {</div>
<div class="line">                 <span class="keywordflow">return</span> <a class="code" href="classgko_1_1DpcppExecutor.html#ae9b875dfe3af7f3f3f24071bfb2f895e">gko::DpcppExecutor::create</a>(0,</div>
<div class="line">                                                   <a class="code" href="classgko_1_1OmpExecutor.html#a8930142a1913bcbcac4fb6c917f930d9">gko::OmpExecutor::create</a>());</div>
<div class="line">             }},</div>
<div class="line">            {<span class="stringliteral">&quot;reference&quot;</span>, [] { <span class="keywordflow">return</span> gko::ReferenceExecutor::create(); }}};</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> exec = exec_map.at(executor_string)();  <span class="comment">// throws if not valid</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> hp_A = <a class="code" href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">share</a>(gko::read&lt;hp_mtx&gt;(std::ifstream(<span class="stringliteral">&quot;data/A.mtx&quot;</span>), exec));</div>
<div class="line">    <span class="keyword">auto</span> lp_A = <a class="code" href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">share</a>(gko::read&lt;lp_mtx&gt;(std::ifstream(<span class="stringliteral">&quot;data/A.mtx&quot;</span>), exec));</div>
<div class="line">    <span class="keyword">auto</span> A_dim = hp_A-&gt;get_size();</div>
<div class="line">    <span class="keyword">auto</span> b_dim = <a class="code" href="structgko_1_1dim.html">gko::dim&lt;2&gt;</a>{A_dim[1], 1};</div>
<div class="line">    <span class="keyword">auto</span> x_dim = <a class="code" href="structgko_1_1dim.html">gko::dim&lt;2&gt;</a>{A_dim[0], b_dim[1]};</div>
<div class="line">    <span class="keyword">auto</span> host_b = hp_vec::create(exec-&gt;get_master(), b_dim);</div>
<div class="line">    std::default_random_engine rand_engine(32);</div>
<div class="line">    <span class="keyword">auto</span> dist = std::uniform_real_distribution&lt;RealValueType&gt;(0.0, 1.0);</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; host_b-&gt;get_size()[0]; i++) {</div>
<div class="line">        host_b-&gt;at(i, 0) = get_rand_value&lt;HighPrecision&gt;(dist, rand_engine);</div>
<div class="line">    }</div>
<div class="line">    <span class="keyword">auto</span> hp_b = <a class="code" href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">share</a>(<a class="code" href="namespacegko.html#a1beb80750459e4201aa9d882d2d074c3">gko::clone</a>(exec, host_b));</div>
<div class="line">    <span class="keyword">auto</span> lp_b = <a class="code" href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">share</a>(lp_vec::create(exec));</div>
<div class="line">    lp_b-&gt;copy_from(hp_b);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> hp_x = <a class="code" href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">share</a>(hp_vec::create(exec, x_dim));</div>
<div class="line">    <span class="keyword">auto</span> lp_x = <a class="code" href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">share</a>(lp_vec::create(exec, x_dim));</div>
<div class="line">    <span class="keyword">auto</span> hplp_x = <a class="code" href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">share</a>(hp_x-&gt;clone());</div>
<div class="line">    <span class="keyword">auto</span> lplp_x = <a class="code" href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">share</a>(hp_x-&gt;clone());</div>
<div class="line">    <span class="keyword">auto</span> lphp_x = <a class="code" href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">share</a>(hp_x-&gt;clone());</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> hp_sec = timing(exec, hp_A, hp_b, hp_x);</div>
<div class="line">    <span class="keyword">auto</span> lp_sec = timing(exec, lp_A, lp_b, lp_x);</div>
<div class="line">    <span class="keyword">auto</span> hplp_sec = timing(exec, hp_A, lp_b, hplp_x);</div>
<div class="line">    <span class="keyword">auto</span> lplp_sec = timing(exec, lp_A, lp_b, lplp_x);</div>
<div class="line">    <span class="keyword">auto</span> lphp_sec = timing(exec, lp_A, hp_b, lphp_x);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> neg_one = gko::initialize&lt;hp_vec&gt;({-1.0}, exec);</div>
<div class="line">    <span class="keyword">auto</span> hp_x_norm = gko::initialize&lt;real_vec&gt;({0.0}, exec-&gt;get_master());</div>
<div class="line">    <span class="keyword">auto</span> lp_diff_norm = gko::initialize&lt;real_vec&gt;({0.0}, exec-&gt;get_master());</div>
<div class="line">    <span class="keyword">auto</span> hplp_diff_norm = gko::initialize&lt;real_vec&gt;({0.0}, exec-&gt;get_master());</div>
<div class="line">    <span class="keyword">auto</span> lplp_diff_norm = gko::initialize&lt;real_vec&gt;({0.0}, exec-&gt;get_master());</div>
<div class="line">    <span class="keyword">auto</span> lphp_diff_norm = gko::initialize&lt;real_vec&gt;({0.0}, exec-&gt;get_master());</div>
<div class="line">    <span class="keyword">auto</span> lp_diff = hp_x-&gt;clone();</div>
<div class="line">    <span class="keyword">auto</span> hplp_diff = hp_x-&gt;clone();</div>
<div class="line">    <span class="keyword">auto</span> lplp_diff = hp_x-&gt;clone();</div>
<div class="line">    <span class="keyword">auto</span> lphp_diff = hp_x-&gt;clone();</div>
<div class="line"> </div>
<div class="line">    hp_x-&gt;compute_norm2(hp_x_norm);</div>
<div class="line">    lp_diff-&gt;add_scaled(neg_one, lp_x);</div>
<div class="line">    lp_diff-&gt;compute_norm2(lp_diff_norm);</div>
<div class="line">    hplp_diff-&gt;add_scaled(neg_one, hplp_x);</div>
<div class="line">    hplp_diff-&gt;compute_norm2(hplp_diff_norm);</div>
<div class="line">    lplp_diff-&gt;add_scaled(neg_one, lplp_x);</div>
<div class="line">    lplp_diff-&gt;compute_norm2(lplp_diff_norm);</div>
<div class="line">    lphp_diff-&gt;add_scaled(neg_one, lphp_x);</div>
<div class="line">    lphp_diff-&gt;compute_norm2(lphp_diff_norm);</div>
<div class="line">    exec-&gt;synchronize();</div>
<div class="line"> </div>
<div class="line">    std::cout.precision(10);</div>
<div class="line">    std::cout &lt;&lt; std::scientific;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;High Precision time(s): &quot;</span> &lt;&lt; hp_sec &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;High Precision result norm: &quot;</span> &lt;&lt; hp_x_norm-&gt;at(0)</div>
<div class="line">              &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Low Precision time(s): &quot;</span> &lt;&lt; lp_sec &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Low Precision relative error: &quot;</span></div>
<div class="line">              &lt;&lt; lp_diff_norm-&gt;at(0) / hp_x_norm-&gt;at(0) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Hp * Lp -&gt; Hp time(s): &quot;</span> &lt;&lt; hplp_sec &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Hp * Lp -&gt; Hp relative error: &quot;</span></div>
<div class="line">              &lt;&lt; hplp_diff_norm-&gt;at(0) / hp_x_norm-&gt;at(0) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Lp * Lp -&gt; Hp time(s): &quot;</span> &lt;&lt; lplp_sec &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Lp * Lp -&gt; Hp relative error: &quot;</span></div>
<div class="line">              &lt;&lt; lplp_diff_norm-&gt;at(0) / hp_x_norm-&gt;at(0) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Lp * Hp -&gt; Hp time(s): &quot;</span> &lt;&lt; lplp_sec &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Lp * Hp -&gt; Hp relative error: &quot;</span></div>
<div class="line">              &lt;&lt; lphp_diff_norm-&gt;at(0) / hp_x_norm-&gt;at(0) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="anamespacegko_html_ae749a5ea11a93c1bcc9158d9a6e9fb68af1f713c9e000f5d3f280adbd124df4f5"><div class="ttname"><a href="namespacegko.html#ae749a5ea11a93c1bcc9158d9a6e9fb68af1f713c9e000f5d3f280adbd124df4f5">gko::layout_type::array</a></div><div class="ttdoc">The matrix should be written as dense matrix in column-major order.</div></div>
<div class="ttc" id="aclassgko_1_1matrix_1_1Dense_html"><div class="ttname"><a href="classgko_1_1matrix_1_1Dense.html">gko::matrix::Dense</a></div><div class="ttdoc">Dense is a matrix format which explicitly stores all values of the matrix.</div><div class="ttdef"><b>Definition:</b> dense_cache.hpp:19</div></div>
<div class="ttc" id="anamespacegko_html_a1beb80750459e4201aa9d882d2d074c3"><div class="ttname"><a href="namespacegko.html#a1beb80750459e4201aa9d882d2d074c3">gko::clone</a></div><div class="ttdeci">detail::cloned_type&lt; Pointer &gt; clone(const Pointer &amp;p)</div><div class="ttdoc">Creates a unique clone of the object pointed to by p.</div><div class="ttdef"><b>Definition:</b> utils_helper.hpp:173</div></div>
<div class="ttc" id="aclassgko_1_1HipExecutor_html_aa0701fe1303e03a8331da7e95008100d"><div class="ttname"><a href="classgko_1_1HipExecutor.html#aa0701fe1303e03a8331da7e95008100d">gko::HipExecutor::create</a></div><div class="ttdeci">static std::shared_ptr&lt; HipExecutor &gt; create(int device_id, std::shared_ptr&lt; Executor &gt; master, bool device_reset, allocation_mode alloc_mode=default_hip_alloc_mode, CUstream_st *stream=nullptr)</div><div class="ttdoc">Creates a new HipExecutor.</div></div>
<div class="ttc" id="aclassgko_1_1version__info_html_a6daeb8a087cfb57fa055526fc133d8eb"><div class="ttname"><a href="classgko_1_1version__info.html#a6daeb8a087cfb57fa055526fc133d8eb">gko::version_info::get</a></div><div class="ttdeci">static const version_info &amp; get()</div><div class="ttdoc">Returns an instance of version_info.</div><div class="ttdef"><b>Definition:</b> version.hpp:139</div></div>
<div class="ttc" id="astructgko_1_1dim_html"><div class="ttname"><a href="structgko_1_1dim.html">gko::dim&lt; 2 &gt;</a></div></div>
<div class="ttc" id="anamespacegko_html_a3ce296f73db0ff398bdea6009a3a5c58"><div class="ttname"><a href="namespacegko.html#a3ce296f73db0ff398bdea6009a3a5c58">gko::share</a></div><div class="ttdeci">detail::shared_type&lt; OwningPointer &gt; share(OwningPointer &amp;&amp;p)</div><div class="ttdoc">Marks the object pointed to by p as shared.</div><div class="ttdef"><b>Definition:</b> utils_helper.hpp:224</div></div>
<div class="ttc" id="aclassgko_1_1CudaExecutor_html_a6c423656c7c0eb53810cb77bb4a66d15"><div class="ttname"><a href="classgko_1_1CudaExecutor.html#a6c423656c7c0eb53810cb77bb4a66d15">gko::CudaExecutor::create</a></div><div class="ttdeci">static std::shared_ptr&lt; CudaExecutor &gt; create(int device_id, std::shared_ptr&lt; Executor &gt; master, bool device_reset, allocation_mode alloc_mode=default_cuda_alloc_mode, CUstream_st *stream=nullptr)</div><div class="ttdoc">Creates a new CudaExecutor.</div></div>
<div class="ttc" id="aclassgko_1_1OmpExecutor_html_a8930142a1913bcbcac4fb6c917f930d9"><div class="ttname"><a href="classgko_1_1OmpExecutor.html#a8930142a1913bcbcac4fb6c917f930d9">gko::OmpExecutor::create</a></div><div class="ttdeci">static std::shared_ptr&lt; OmpExecutor &gt; create(std::shared_ptr&lt; CpuAllocatorBase &gt; alloc=std::make_shared&lt; CpuAllocator &gt;())</div><div class="ttdoc">Creates a new OmpExecutor.</div><div class="ttdef"><b>Definition:</b> executor.hpp:1391</div></div>
<div class="ttc" id="aclassgko_1_1matrix_1_1Ell_html"><div class="ttname"><a href="classgko_1_1matrix_1_1Ell.html">gko::matrix::Ell</a></div><div class="ttdoc">ELL is a matrix format where stride with explicit zeros is used such that all rows have the same numb...</div><div class="ttdef"><b>Definition:</b> csr.hpp:31</div></div>
<div class="ttc" id="anamespacegko_1_1log_html_a15f71654c6c4f4defc95f9359343fa27af7235a61fdc3adc78d866fd8085d44db"><div class="ttname"><a href="namespacegko_1_1log.html#a15f71654c6c4f4defc95f9359343fa27af7235a61fdc3adc78d866fd8085d44db">gko::log::profile_event_category::operation</a></div><div class="ttdoc">Kernel execution and data movement.</div></div>
<div class="ttc" id="anamespacegko_html_afd46d554050c4ae90e84ea4fcd9a41f3"><div class="ttname"><a href="namespacegko.html#afd46d554050c4ae90e84ea4fcd9a41f3">gko::remove_complex</a></div><div class="ttdeci">typename detail::remove_complex_s&lt; T &gt;::type remove_complex</div><div class="ttdoc">Obtain the type which removed the complex of complex/scalar type or the template parameter of class b...</div><div class="ttdef"><b>Definition:</b> math.hpp:325</div></div>
<div class="ttc" id="aclassgko_1_1DpcppExecutor_html_ae9b875dfe3af7f3f3f24071bfb2f895e"><div class="ttname"><a href="classgko_1_1DpcppExecutor.html#ae9b875dfe3af7f3f3f24071bfb2f895e">gko::DpcppExecutor::create</a></div><div class="ttdeci">static std::shared_ptr&lt; DpcppExecutor &gt; create(int device_id, std::shared_ptr&lt; Executor &gt; master, std::string device_type=&quot;all&quot;, dpcpp_queue_property property=dpcpp_queue_property::in_order)</div><div class="ttdoc">Creates a new DpcppExecutor.</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
